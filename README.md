# NodeSchool Assistant

Organizing a NodeSchool requires a lot of logistics; from finding date, venue and food to updating the website to
reflect the upcoming event.

The goal of this assistant is to help you automate the work of updating the NodeSchool website when a new event is
scheduled just by asking you some questions. Easy, right? Let's go to the details.

## Installation

Simply run:
```
npm install --save-dev nodeschool-organizer
```

## Setup (Convention Over Configuration)

To make our lives easy, NodeSchool Assistant follows the Convention-over-Configuration approach. So, it does the
following assumptions:

1. You have a `.env` file in your project where the configuration lives (check the [Environment Variables](#environment-variables)
section for more details about the values supported).
1. Your NodeSchool website is hosted on Github (using Github Pages).
1. The folder used as output for your HTML files is `docs`.
1. You use `mustache` and `stylus` to generate your website (this will change soon to make it more flexible).
1. The `docs-src` folder contains the sources for your website. There, you must have the following files:
  * `data.json` file: stores the data for your website (if it doesn't exist, will be created after generating an event).
  * `images` folder: that will hold your images (e.g. the social image generated by the assistant).
  * `styles` folder: holds your Stylus files (CSS).
  * `templates` folder: stores all the templates to generate your website. In there, you must have:
    * `event-description.mustache`: The template to create the HTML for the event description (used in Meetup.com, for example).
    * `index.mustache`: The template to generate your website's index.html.
    * `mentor-registration-issue.mustache`: The template to create the description for the Github ticket used for mentor registration.
    * `social.mustache`: The template to generate an HTML that later will be used to render the social image for event.

## Environment Variables

These are the values supported in the `.env` file to configure your instance.

 * **CHAPTER_NAME**: The default name of your chapter (e.g. "NodeSchool Seattle")
 * **GITHUB_ORG**: The github organization of your NodeSchool chapter (usually "nodeschool")
 * **GITHUB_REPO**: The github repo where you host the website for your chapter (e.g. "seattle")
 * **GITHUB_API_TOKEN**: Your personal github API token
 * **GITHUB_API_USER**: Your github username
 * **MEETUP_API_KEY**: Your Meetup.com API key
 * **MEETUP_URLNAME**: The URL Name of your group on Meetup.com (e.g. "Meetup-API-Testing")
 * **MEETUP_GROUP_ID**: The group ID of your group on Meetup.com (e.g. 1556336)
 * **BING_MAPS_API_KEY**: Your Bing Maps API key (to geolocate the venue during event creation)
 * **PUBLISH_WEBSITE**: A flag to indicate if an automatic commit is pushed to your github repo after building the website (false by default)

## Usage

Create a script (e.g. 'scripts.js') in your project folder and add something like this:
```javascript
require('dotenv').config();

const chalk = require('chalk');
const organizer = require('nodeschool-organizer');

organizer.getEventData()
  .then(organizer.previewData)
  .then(organizer.getEventLocationCoordinates)
  .then(organizer.createMentorIssue)
  .then(organizer.createMeetupEvent)
  .then(organizer.updateWebsiteData)
  .then(organizer.buildWebsite)
  .then(organizer.publishWebsite)
  .then(organizer.generateSocialImage)
  .then((data) => {
    console.log(chalk.green('✔') + ' Event created successfully');
  })
  .catch((err) => {
    console.log(err);
    console.log(chalk.red('✘') + ' Event creation failed');
  });
```

## TO-DO
- Improve data.json (adding the questions and creating it if it doesn't exist)
- Add unit tests
- Add input validations and default values
- Improve config (only store base path and let each module handle the specifics)
- Add flexible pipeline to generate website (like allowing custom commands)
- Add CLI mode
